<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Games</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&family=Silkscreen:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">

 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.dataTables.min.css">

    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="../JS/ajaxcalls.js"></script>
    <script src="../JS/navBar.js"></script>
    <link rel="stylesheet" href="../CSS/StyleSheet.css" />

    
 <script>
    $(document).ready(function (){
        let port = 7048;
        server = `https://localhost:${port}/`;
        //api = "https://proj.ruppin.ac.il/igroup5/test2/tar1/api/Games";
        api = server + "api/Games";

        getUserOnNavBar(userData);
        
        $("#update-form").hide();
        $("#games-admin-form").show();

        renderGamesTable();

        const togglePassword = document.getElementById("toggle-password");
        const passwordInput = document.getElementById("updated-password");

        if (togglePassword && passwordInput) {
          togglePassword.addEventListener("click", () => {
            if (passwordInput.type === "password") {
              passwordInput.type = "text";
              togglePassword.textContent = "üôà Hide";
            } else {
              passwordInput.type = "password";
              togglePassword.textContent = "üëÅÔ∏è Show";
            }
          });
        } else {
          console.error("Password input or toggle button not found.");
        }


        $("#update-details").click(function () {
          $("#update-form").show();
          $("#games-admin-form").hide();
          //$("#filter-controls").hide();
        //  $("#games-header").hide();
        //  $("#games-container").hide();
          document.getElementById("updated-name").value = userData.name || "";
          document.getElementById("updated-email").value = userData.email || "";
          document.getElementById("updated-password").value =
            userData.password || "";
        });

        $("#cancel-update").click(function () {
          swal
            .fire({
              title: "Are you sure?",
              icon: "warning",
              showCancelButton: true,
              confirmButtonText: "Yes, cancel",
              cancelButtonText: "No, stay here",
            })
            .then((result) => {
              if (result.isConfirmed) {
                // Hide the form and reset fields
                $("#update-form").hide();
                $("#games-admin-form").show();
               // $("#games-header").show();
             //   $("#games-container").show();
              }
            });
        });
    })


 
 </script>
  
  </head>
  <body>
    <!-- Navbar -->
    <section class="top-page">
      <nav class="navbar">
        <div id="navbar-list">
          <div id="user-details" class="navbar-link"></div>
          <div id="navbar-right-side">
            <div>
              <a href="MyGames.html" class="navbar-link">My Wish List</a>
            </div>
            <div>
              <a href="LoginNew.html" class="navbar-link button-style"
                >Log Out</a
              >
            </div>
            <a href="index.html" class="navbar-link">Games List</a>
              <!-- <a href="adminPage.html" id="dmin-btn" class="navbar-link" style="display: none" >Admin</a> -->
            </div>
          </div>
        </div>
      </nav>
    </section>

    <button
      id="update-details"
      class="Edit_btn_color"
      style="
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.6s;
        position: fixed;
        right: 25px;
        bottom: 70%;
        background: rgb(89, 71, 226);
        color: white;
        z-index: 10;
        padding: 0.7rem;
        width: 80px;
        border-radius: 10rem;
        transform: unset;
      "
    >
      Edit Details
    </button>

    <form id="games-admin-form">
        <table id="games-table" class="display nowrap" style="width:100%">
            <thead>
                <tr>
                    <th></th>
                    <th>AppID</th>
                    <th>App Name</th>
                    <th>Number of purcheses</th>
                    <th>Revenue</th>
                </tr>
            </thead>
        </table>

    </form>

    <!-- UpdateForm -->
    <form id="update-form" action="">
      <h2>My Details</h2>
      <label for="register-name">Name:</label>
      <input type="text" id="updated-name" name="Name" required />

      <label for="register-email">Email:</label>
      <input type="email" id="updated-email" name="Email" required />

      <label for="register-password">Password:</label>
      <div class="password-container">
        <input type="password" id="updated-password" name="Password" required />
        <button type="button" id="toggle-password" class="toggle-password-btn">
          üëÅÔ∏è Show
        </button>
      </div>
      <div class="form-buttons">
        <button type="button" id="cancel-update" class="cancel-btn">
          Cancel
        </button>
        <input type="submit" value="Update" />
      </div>
    </form>
    <!-- end -->
  
  </body>
</html>
